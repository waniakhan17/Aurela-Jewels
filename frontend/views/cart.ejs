<%- include('partials/header', { page:'Cart', title:title }) %>

<main>
  <section class="cart-section">
    <h2>Your Shopping Cart</h2>

    <div class="cart-container">

      <div class="cart-items">
        <% if (items && items.length > 0) { %>
          <% items.forEach(item => { %>
            <div class="cart-item" id="cart-item-<%= item.productId._id %>">
              <img src="http://localhost:3000/JewelryImages/<%= item.productId.image %>" 
                   alt="<%= item.productId.name %>" />
              <div class="item-details">
                <h4><%= item.productId.name %></h4>
                <p>Price: $<span class="item-price"><%= item.productId.price %></span></p>
                <div class="quantity">
                  <button onclick="updateQty('<%= item.productId._id %>', -1)">-</button>
                  <span id="qty-<%= item.productId._id %>"><%= item.quantity %></span>
                  <button onclick="updateQty('<%= item.productId._id %>', 1)">+</button>
                </div>
                <a href="#" onclick="removeItem('<%= item.productId._id %>')">Remove</a>
              </div>
            </div>
          <% }) %>
        <% } else { %>
          <p>Your cart is empty</p>
        <% } %>
      </div>

      <!-- Summary -->
      <div class="cart-summary">
        <h3>Order Summary</h3>
        <div class="summary-row">
          <span>Subtotal</span>
          <span id="subtotal-value">$<%= subtotal %></span>
        </div>
        <div class="summary-row">
          <span>Shipping</span>
          <span>300</span>
        </div>
        <hr>
        <div class="summary-row total">
          <span>Total</span>
          <span id="total-value">$<%= total %></span>
        </div>
        <button class="checkout-btn" onclick="window.location.href='/checkout'">Proceed to Checkout</button>
      </div>

    </div>
  </section>
</main>

<%- include('partials/footer') %>
