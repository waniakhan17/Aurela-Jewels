<%- include('../partials/checkHead', { page:'Admin' , title: 'Admin Login' }) %>

    <div class="login-container"
        style="max-width: 400px; margin: 100px auto; padding: 20px; border: 1px solid #ddd; border-radius: 8px;">
        <h2 style="text-align: center;">Admin Login</h2>

        <form id="loginForm">
            <div style="margin-bottom: 15px;">
                <label>Email:</label>
                <input type="email" id="email" name="email" required
                    style="width: 100%; padding: 8px; margin-top: 5px;">
            </div>
            <div style="margin-bottom: 15px;">
                <label>Password:</label>
                <input type="password" id="password" name="password" required
                    style="width: 100%; padding: 8px; margin-top: 5px;">
            </div>
            <button type="submit"
                style="width: 100%; padding: 10px; background: #333; color: white; border: none; cursor: pointer;">Login</button>
        </form>
        <p id="message" style="color: red; margin-top: 10px; text-align: center;"></p>
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const message = document.getElementById('message');

            try {
                const response = await fetch('http://localhost:3000/admin/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: "include",
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();
                console.log(data.message);
                if (response.ok) {
                    window.location.href = '/admin/dashboard';
                } else {
                    message.innerText = data.message || "Login failed";
                }
            } catch (err) {
                message.innerText = "Something went wrong!";
            }
        });
    </script>

    <%- include('../partials/checkFooter') %>